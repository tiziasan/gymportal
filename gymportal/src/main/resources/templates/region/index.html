<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout/layout}" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<div layout:fragment="content">

	<div>
		<div class="search-bar">
			<form class="plr-5" th:action="${#request.getRequestURI()}" method="get" >
				<input type="text" name="search" id="search" placeholder="Ricerca" th:value="${search}"/>
				<button class="btn-primary" type="Submit" th:text="#{common.search}">Cerca</button>
			</form>
		</div>

		<h1 th:text="${region}">Regione</h1>
	</div>
	<div class="column" th:each="gym : ${gymList}">
		<div class="card">
			<h3 th:text="${gym.name}"></h3>
			<h4 th:text="${gym.province}"></h4>
			<h4 th:text="${gym.address}"></h4>

			<a th:href="@{/favoriteGym/create/{gymId}(gymId=${gym.id})}" sec:authorize="hasAuthority('utente')"><button class="btn-primary" sec:authorize="hasAuthority('utente')" th:text="#{favorite.add}" >Aggiungi ai preferiti!</button></a>
			<a th:href="@{/feedback/create(id=${gym.id})}" sec:authorize="hasAuthority('utente')"><button class="btn-primary" th:text="#{feedback.gym.add}">Recensisci Palestra</button></a>
			<a th:href="@{/chat(idGym=${gym.id})}" sec:authorize="!hasAnyAuthority('gestore')"><button class="btn-primary" th:text="#{chat.message.send}">Invia Messaggio</button></a>
			<a th:href="@{/course/gym/{gymId}(gymId=${gym.id})}"><button class="btn-primary" th:text="#{gym.show.courses}">Vai ai corsi</button></a>
			<a th:href="@{/gym/update/(id=${gym.id})}" sec:authorize="hasAuthority('gestore')"><button class="btn-primary" th:text="#{common.edit}">Modifica</button></a>
			<a th:href="@{/gym/delete/(id=${gym.id})}" sec:authorize="hasAuthority('gestore')"><button class="btn-primary" th:text="#{common.delete}">Elimina</button></a>
		</div>
	</div>
</div>
</body>
</html>

